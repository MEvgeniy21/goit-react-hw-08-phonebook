"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[422],{6323:function(n,e,t){t.d(e,{Z:function(){return c}});var r,i=t(883),a=t(168),o=t(6088).Z.h1(r||(r=(0,a.Z)(["\n  font-size: ",";\n"])),(function(n){return n.theme.fontSizes.l})),s=t(3329),c=function(n){var e=n.children,t=n.pt,r=void 0===t?0:t,a=n.pb,c=void 0===a?0:a,u=n.mt,d=void 0===u?0:u,l=n.mb,h=void 0===l?0:l;return(0,s.jsx)(i.x,{pt:r,pb:c,mt:d,mb:h,children:(0,s.jsx)(o,{children:e})})}},9422:function(n,e,t){t.r(e),t.d(e,{default:function(){return sn}});var r,i,a,o,s=t(6323),c=t(5861),u=t(885),d=t(4687),l=t.n(d),h=t(1413),m=t(4925),f=t(5705),x=t(168),p=t(6088),b=p.Z.input(r||(r=(0,x.Z)(["\n  width: 100%;\n  border-color: ",";\n"])),(function(n){return n.isError?n.theme.colors.red:"none"})),g=t(9085),v=t(3329),j=["name","onBlur"],Z=function(n){var e=n.name,t=n.onBlur,r=(0,m.Z)(n,j),i=(0,f.U$)(e),a=(0,u.Z)(i,2),o=a[0],s=a[1];return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(b,(0,h.Z)((0,h.Z)((0,h.Z)({},o),r),{},{onBlur:function(n){t(n),s.error&&g.Am.error(s.error)},isError:s.touched&&s.error}))})},w=p.Z.button(i||(i=(0,x.Z)(["\n  position: relative;\n  width: ","px;\n  height: ","px;\n\n  &:disabled {\n    cursor: auto;\n  }\n"])),(function(n){return n.width}),(function(n){return n.height})),y=["children","validateForm"],C=function(n){var e=n.children,t=n.validateForm,r=(0,m.Z)(n,y);return(0,v.jsx)(w,(0,h.Z)((0,h.Z)({},r),{},{type:"submit",onClick:function(n){t().then((function(n){var e=Object.values(n);e.length&&e.map((function(n){return g.Am.error(n)}))}))},children:e}))},k=t(6811),A=t(2797),F=A.Ry().shape({name:A.Z_().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan").required(),number:A.Z_().min(5).matches(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/,"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +").required()}),z=(0,p.Z)(f.l0)(a||(a=(0,x.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: ","px;\n  padding: ","px;\n  margin-bottom: ","px;\n  border: "," ",";\n  border-radius: ","px;\n"])),(function(n){return n.theme.space[4]}),(function(n){return n.theme.space[4]}),(function(n){return n.theme.space[5]}),(function(n){return n.theme.borders.normal}),(function(n){return n.theme.colors.black}),(function(n){return n.theme.space[2]})),B=p.Z.label(o||(o=(0,x.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: ","px;\n  font-size: ",";\n"])),(function(n){return n.theme.space[2]}),(function(n){return n.theme.fontSizes.m})),L=t(883),_=t(2372),S=t(5273),E=t(2791),q=t(9320);function I(){var n=(0,q.Tn)(),e=(0,u.Z)(n,2),t=e[0],r=e[1].isLoading,i=(0,_.p7)(),a=(0,E.useRef)((0,S.x0)()),o=(0,E.useRef)((0,S.x0)()),s=function(){var n=(0,c.Z)(l().mark((function n(e,r){var a,o,s,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.name,o=e.number,s=a.trim(),!i(s)){n.next=6;break}return g.Am.warning("".concat(s," is already in contacts")),n.abrupt("return");case 6:return n.prev=6,n.next=9,t({name:s,number:o});case 9:c=n.sent,c.error?g.Am.error("Contact creation error"):g.Am.success('contact - "'.concat(s,": ").concat(o,'" has been added')),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(6),console.log(n.t0);case 17:r.resetForm();case 18:case"end":return n.stop()}}),n,null,[[6,14]])})));return function(e,t){return n.apply(this,arguments)}}();return(0,v.jsx)(f.J9,{initialValues:{name:"",number:""},onSubmit:s,validationSchema:F,children:function(n){return(0,v.jsxs)(z,{autoComplete:"off",children:[(0,v.jsxs)(B,{htmlFor:a,children:["Name",(0,v.jsx)(Z,{type:"text",name:"name",id:a,disabled:r,onBlur:n.handleBlur,required:!0})]}),(0,v.jsxs)(B,{htmlFor:o,children:["Number",(0,v.jsx)(Z,{type:"tel",name:"number",id:o,disabled:r,onBlur:n.handleBlur,required:!0})]}),(0,v.jsx)(L.x,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,v.jsxs)(C,{validateForm:n.validateForm,width:100,height:25,disabled:r,children:[r&&(0,v.jsx)(k.Z,{width:20}),"Add contact"]})})]})}})}var N,R,V,J,D,G=t(2134),P=(0,p.Z)(f.l0)(N||(N=(0,x.Z)(["\n  position: relative;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  gap: ","px;\n  padding: ","px;\n  border: "," ",";\n  border-radius: ","px;\n"])),(function(n){return n.theme.space[2]}),(function(n){return n.theme.space[2]}),(function(n){return n.theme.borders.normal}),(function(n){return n.theme.colors.black}),(function(n){return n.theme.space[2]})),T=p.Z.label(R||(R=(0,x.Z)(["\n  width: 65px;\n  flex-shrink: 0;\n  font-weight: ",";\n  font-size: ",";\n"])),(function(n){return n.theme.fontWeights.normal}),(function(n){return n.theme.fontSizes.m})),W=p.Z.button(V||(V=(0,x.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  border: ",";\n  border-radius: ",";\n\n  & svg {\n    width: 25px;\n    height: 25px;\n  }\n"])),(function(n){return n.theme.borders.none}),(function(n){return n.theme.radii.round})),$=function(n){var e=n.id,t=n.name,r=n.number,i=n.onEdit,a=n.isLoadingEdit,o=n.updateContact,s={name:t,number:r},u=(0,E.useRef)((0,S.x0)()),d=(0,E.useRef)((0,S.x0)()),h=function(){i(!1)},m=function(){var n=(0,c.Z)(l().mark((function n(i,a){var s,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((s=i.name.trim())!==t||i.number!==r){n.next=4;break}return h(),n.abrupt("return");case 4:return n.prev=4,n.next=7,o({id:e,name:s,number:i.number});case 7:c=n.sent,c.error?g.Am.error("Contact editing error"):(g.Am.success('contact - "'.concat(s,": ").concat(i.number,'" has been edited')),h()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e,t){return n.apply(this,arguments)}}();return(0,v.jsx)(f.J9,{initialValues:s,onSubmit:m,validationSchema:F,children:function(n){return(0,v.jsxs)(P,{autoComplete:"off",children:[(0,v.jsxs)(L.x,{width:1,children:[(0,v.jsxs)(L.x,{display:"flex",alignItems:"center",mb:2,children:[(0,v.jsx)(T,{htmlFor:u,children:"Name"}),(0,v.jsx)(Z,{type:"text",name:"name",id:u,disabled:a,onBlur:n.handleBlur,required:!0})]}),(0,v.jsxs)(L.x,{display:"flex",alignItems:"center",children:[(0,v.jsx)(T,{htmlFor:d,children:"Number"}),(0,v.jsx)(Z,{type:"tel",name:"number",id:d,disabled:a,onBlur:n.handleBlur,required:!0})]})]}),(0,v.jsxs)(L.x,{width:50,display:"flex",flexDirection:"column",alignItems:"end",justifyContent:"space-between",children:[(0,v.jsx)(W,{type:"button",onClick:h,children:(0,v.jsx)(G.LHV,{})}),(0,v.jsxs)(C,{validateForm:n.validateForm,width:50,height:25,disabled:a,children:[a&&(0,v.jsx)(k.Z,{width:20}),"edit"]})]})]})}})},H=p.Z.button(J||(J=(0,x.Z)(["\n  position: relative;\n  width: ","px;\n  height: ","px;\n\n  &:disabled {\n    cursor: auto;\n  }\n"])),(function(n){return n.width}),(function(n){return n.height}));function M(n){var e=n.id,t=n.name,r=n.number,i=(0,E.useState)(!1),a=(0,u.Z)(i,2),o=a[0],s=a[1],d=(0,q.Nt)(),h=(0,u.Z)(d,2),m=h[0],f=h[1].isLoading,x=(0,q.wv)(),p=(0,u.Z)(x,2),b=p[0],j=p[1].isLoading,Z=function(){var n=(0,c.Z)(l().mark((function n(){var i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m(e);case 3:i=n.sent,i.error?g.Am.error("Contact deletion error"):g.Am.success('contact - "'.concat(t,": ").concat(r,'" has been deleted')),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return o?o?(0,v.jsx)($,{id:e,name:t,number:r,onEdit:s,isLoadingEdit:j,updateContact:b}):void 0:(0,v.jsxs)(L.x,{display:"flex",alignItems:"center",justifyContent:"start",gridGap:3,children:[(0,v.jsxs)("span",{children:[t,":"]}),(0,v.jsx)("span",{children:r}),(0,v.jsxs)(H,{type:"button",width:50,height:25,onClick:function(){s(!0)},disabled:j,children:[j&&(0,v.jsx)(k.Z,{width:20}),"edit"]}),(0,v.jsxs)(H,{type:"button",width:70,height:25,onClick:Z,disabled:f,children:[f&&(0,v.jsx)(k.Z,{width:20}),"delete"]})]})}var O=p.Z.ul(D||(D=(0,x.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: ","px;\n  margin-left: ","px;\n  font-weight: ",";\n"])),(function(n){return n.theme.space[4]}),(function(n){return n.theme.space[5]}),(function(n){return n.theme.fontWeights.medium})),Q=t(5048),U=t(6351);function Y(){var n=function(){var n=(0,q.wY)(),e=n.data,t=n.error,r=n.isLoading,i=(0,Q.v9)(U.mj).search.toLowerCase();return r||t?{data:e,error:t,isLoading:r}:{data:e.filter((function(n){return n.name.toLowerCase().includes(i)})),error:t,isLoading:r}}(),e=n.data,t=n.error,r=n.isLoading;return r?(0,v.jsx)(L.x,{position:"relative",width:1,height:100,children:(0,v.jsx)(k.Z,{})}):r||t||null===e||void 0===e||!e.length?r||t||null!==e&&void 0!==e&&e.length?!r&&t?(0,v.jsx)("div",{children:"\u0421ontact getting error"}):void 0:(0,v.jsx)("div",{children:"Contacts not found"}):(0,v.jsx)(O,{children:e.map((function(n){var e=n.id,t=n.name,r=n.number;return(0,v.jsx)("li",{children:(0,v.jsx)(M,{id:e,name:t,number:r})},e)}))})}var K,X,nn=t(1429),en=t(1087);function tn(){var n,e=(0,en.lr)(),t=(0,u.Z)(e,2),r=t[0],i=t[1],a=null!==(n=r.get("filter"))&&void 0!==n?n:"",o=(0,Q.I0)();(0,E.useEffect)((function(){o((0,nn.Q)(a))}),[o,a]);return(0,v.jsxs)(L.x,{display:"flex",flexDirection:"column",gridGap:2,mb:4,children:[(0,v.jsx)("p",{children:"Find contacts by name"}),(0,v.jsx)("input",{type:"text",name:"filter",onChange:function(n){var e=n.currentTarget.value.trim();i(e?{filter:e}:{})},defaultValue:a})]})}var rn=p.Z.div(K||(K=(0,x.Z)(["\n  width: 400px;\n  display: flex;\n  flex-direction: column;\n  align-items: start;\n  margin-top: ","px;\n"])),(function(n){return n.theme.space[4]})),an=p.Z.h2(X||(X=(0,x.Z)(["\n  margin-bottom: ","px;\n  font-size: ",";\n"])),(function(n){return n.theme.space[5]}),(function(n){return n.theme.fontSizes.xm}));function on(){return(0,v.jsxs)(rn,{children:[(0,v.jsx)(s.Z,{mb:5,children:"Phonebook"}),(0,v.jsx)(I,{}),(0,v.jsx)(an,{children:"Contacts"}),(0,v.jsx)(tn,{}),(0,v.jsx)(Y,{})]})}function sn(){return(0,v.jsx)(on,{})}}}]);
//# sourceMappingURL=422.0cb97c3c.chunk.js.map